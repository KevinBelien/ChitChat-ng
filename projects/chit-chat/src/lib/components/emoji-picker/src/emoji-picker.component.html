<div class="ch-emoji-picker">
	<div class="ch-emoji-header-container">
		<div class="ch-searchbar-container">
			<div class="ch-searchbar">
				<ch-text-box
					mode="search"
					variant="filled"
					[autofocus]="true"
					[placeholder]="'emojipicker.search' | translate"
					valueChangeEvent="input"
					[showClearButton]="true"
					[(value)]="searchValue"
					(onValueChanged)="handleSearchValueChanged($event)"
				></ch-text-box>
			</div>
		</div>
		<ng-container *ngIf="isGlobalSkintoneEnabled">
			<ch-skintone-picker
				*ngIf="globalSkintone$ | async as globalSkintone"
				[selectedSkintone]="globalSkintone"
				[size]="20"
				(onSelectionChanged)="handleGlobalSkintoneChanged($event)"
			></ch-skintone-picker>
		</ng-container>
	</div>

	<ng-container *ngIf="filteredEmojis$ | async as filteredEmojis">
		<ng-container
			*ngIf="
				!filteredEmojis.filterActive ||
					filteredEmojis.emojis.length > 0;
				else noData
			"
		>
			<div
				*ngIf="!filteredEmojis.filterActive"
				class="emoji-tab-bar"
				[ngClass]="{ 'bar-bottom': categoryBarPosition === 'bottom' }"
			>
				<ch-emoji-tabs
					*ngIf="emojiCategories$ | async as categories"
					[emojiCategories]="categories"
					[selectedTab]="selectedCategory"
					(onTabClicked)="handleCategoryTabClicked($event)"
				></ch-emoji-tabs>
			</div>
			<div class="ch-emoji-picker-container">
				<ng-container
					*ngIf="
						orientation === 'vertical';
						else horizontalEmojiPicker
					"
				>
					<ch-vertical-emoji-picker
						*ngIf="emojis$ | async as emojis"
						[height]="height"
						[width]="width"
						[emojis]="emojis.emojis"
						[suggestionEmojis]="emojis.suggestionEmojis"
						[filteredEmojis]="emojis.filteredEmojis"
						[showSkintoneIndicator]="isIndividualSkintoneEnabled"
						[emojiSize]="emojiSize"
						[(currentCategory)]="selectedCategory"
						[scrollbarVisible]="scrollbarVisible"
						[emojiCategories]="emojiCategories"
						(onClick)="handleEmojiClick($event)"
						(onScroll)="handleScroll()"
						(onTouchHold)="handleEmojiTouchHold($event)"
					></ch-vertical-emoji-picker>
				</ng-container>

				<ng-template #horizontalEmojiPicker
					><ch-horizontal-emoji-picker></ch-horizontal-emoji-picker
				></ng-template>
			</div>
		</ng-container>
	</ng-container>

	<ng-template #noData>
		<div class="ch-no-data-container">
			<div class="ch-no-data-emoji">{{ noDataEmoji }}</div>
			<div class="ch-no-data-text">No results</div>
		</div>
	</ng-template>
</div>
