<cdk-virtual-scroll-viewport
	class="ch-vscroll-viewport"
	[ngClass]="{ 'ch-scroll-hidden': !scrollbarVisible }"
	[style.height]="'100%'"
	[itemSize]="itemSize$ | async"
	[minBufferPx]="300"
	[maxBufferPx]="450"
	(wheel)="onWheel($event)"
	(scrolledIndexChange)="handleScrolledIndexChanged($event)"
	chClickTouchHold
	dataAttribute="data-emoji"
	(onClick)="handleClick($event)"
	(onTouchHold)="handleTouchHold($event)"
>
	<div class="ch-scroll-wrapper">
		<div
			class="ch-static-category ch-sticky ch-row"
			[style.display]="
				scrollIndex === 0 || emojiCategories.length === 0
					? 'none'
					: 'block'
			"
		>
			<div class="ch-emoji-group-title">
				{{
					currentCategory === 'suggestions' && !!suggestionEmojis
						? suggestionEmojis.suggestionMode
						: currentCategory
				}}
			</div>
		</div>

		<div
			*cdkVirtualFor="
				let row of emojiRows$ | async;
				let index = index;
				trackBy: trackEmojiRow
			"
			class="ch-row"
			[ngClass]="{
				'ch-sticky': row.type === 'category',
				'ch-virtual-category': row.type === 'category'
			}"
		>
			<ng-container *ngIf="row.type === 'category'">
				<div class="ch-emoji-group-title">
					{{ row.translationKey }}
				</div>
			</ng-container>

			<ng-container *ngIf="row.type === 'emoji'">
				<ng-container
					*ngFor="let emoji of row.value; trackBy: trackEmoji"
				>
					<!-- <div class="emoji-container"> -->

					<ch-emoji-button
						[emoji]="emoji.value"
						[attr.data-emoji]="emoji.id"
						[showSkintoneIndicator]="
							!!emoji.skintones && emoji.skintones.length > 0
						"
					></ch-emoji-button>
				</ng-container>
			</ng-container>
		</div>
	</div>
</cdk-virtual-scroll-viewport>
