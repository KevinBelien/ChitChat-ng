<cdk-virtual-scroll-viewport
	class="ch-vscroll-viewport"
	[ngClass]="{ 'ch-scroll-hidden': !scrollbarVisible() }"
	[style.height]="'100%'"
	[itemSize]="itemSize()"
	[minBufferPx]="300"
	[maxBufferPx]="450"
	(wheel)="handleWheelScroll($event)"
	(scrolledIndexChange)="handleScrolledIndexChanged($event)"
	chClickTouchHold
	dataAttribute="data-emoji"
	(onClick)="handleClick($event)"
	(onTouchHold)="handleTouchHold($event)"
>
	<div class="ch-scroll-wrapper">
		<div
			class="ch-static-category ch-sticky ch-row"
			[style.display]="
				scrollIndex() === 0 || emojiCategories().length === 0
					? 'none'
					: 'block'
			"
		>
			<div class="ch-emoji-group-title">
				{{
					currentCategory() === 'suggestions' && !!suggestionEmojis()
						? ('emojipicker.category.' +
								suggestionEmojis()!.suggestionMode
						  | translate
						  | titlecase)
						: ('emojipicker.category.' + currentCategory()
						  | translate
						  | titlecase)
				}}
			</div>
		</div>

		<div
			*cdkVirtualFor="
				let row of emojiRows();
				templateCacheSize: 30;
				let index = index;
				trackBy: trackEmojiRow
			"
			class="ch-row"
			[ngClass]="{
				'ch-sticky': row.type === 'category',
				'ch-virtual-category': row.type === 'category'
			}"
		>
			<ng-container *ngIf="row.type === 'category'">
				<div class="ch-emoji-group-title">
					{{ row.translationKey | translate | titlecase }}
				</div>
			</ng-container>

			<ng-container *ngIf="row.type === 'emoji'">
				<ng-container
					*ngFor="let emoji of row.value; trackBy: trackEmoji"
				>
					<!-- <div class="emoji-container"> -->
					<ng-container
						*ngIf="emojiDataMap()?.get(emoji.id) as emojiData"
					>
						<ch-emoji-button
							[emoji]="emojiData.value"
							[attr.data-emoji]="emojiData.id"
							[showSkintoneIndicator]="
								showSkintoneIndicator() &&
								!!emojiData.skintones &&
								emojiData.skintones.length > 0
							"
						></ch-emoji-button
					></ng-container>
				</ng-container>
			</ng-container>
		</div>
	</div>
</cdk-virtual-scroll-viewport>
